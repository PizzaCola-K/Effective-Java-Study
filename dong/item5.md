# 아이템 5. 자원을 직접 명시하지 말고 의존 객체 주입을 사용하라	

- 
## 나쁜 코드 - 싱글톤
- 정적 유틸리티 클래스 잘못된 예시1 - 정적 유틸리티
  - 유연하지 않고 테스트하기 어렵다 왜냐하면 
  >  todo : 왜 왜 도대체 왜 그러는데
    ```java
    ```

- 정적 유틸리티 클래스 잘못된 예시2 - 싱글톤
  -  사용하는 자원에 따라 동작이 달라지는 클래스에는 정적 유틸리티 클래스나 싱글턴 방식이 적합하지 않을수도 있음
    ```java
    ```


- 나쁜 코드인 이유
  - 두 방식 모두 사전을 단 하나만 사용한다고 가정한다는 점에서 그리 훌륭해 보 이지 않다. 실전에서는 사전이 언어별로 따로 있고 특수 어휘용 사전을 별도로 두기도 한다. 심지어 테스트용 사전도 필요할 수 있다. 사전 하나로 이 모든 쓰 임에 대응할 수 있기를 바라는 건 너무 순진한 생각

## 좋은코드
-  인스턴스를 생성할 때 생성자에 필요한 자원을 넘겨주는 방식
- 의존 객체 주입의 한 형태로, 맞춤법 검사기를 생성할 때 의존 객체인 사전을 주입

ictionary라는 딱 하나의 자원 만 사용하지만, 자원이 몇 개든 의존 관계가 어떻든 상관없이 잘 작동한다. 또 한 불변(아이템 17)을 보장하여 (같은 자원을 사용하려는) 여러 클라이언트가 의존 객체들을 안심하고 공유할 수 있기도 하다. 의존 객체 주입은 생성자, 정 적 팩터리(아이템 1), 빌더(아이템 2) 모두에 똑같이 응용


## 핵심정리
### 싱글턴과 정적 유틸리티 클래스를 사용하기 부적절한 상황과 해결책
- 아래 두가지 상황이 "싱글턴"과 "정적 유틸리티 클래스" 를 쓰기에 좋지못한 상황인데요
  - 클래스가 내부적으로 하나 이상의 자원에 의존
  - 그 자원이 클래스 동작에 영향
- 해결책으로는 
  - 자원들을 클래스가 직접 만들게 해서는 안된다
  -  필요한 자원을 (혹은 그 자원을 만들어주는 팩터리를) 생성자에 (혹은 정적 팩터리나 빌더에) 넘겨
  - 의존 객체 주입이라 하는 이 기법은 클 래스의 유연성, 재사용성, 테스트 용이성을 기막히게 개선


## TMI : 팩토리 메서드 패턴
- 팩토리 : 호출할 때마다 특정 타입의 인스턴스를 반복해서 만들어주는 객체, 
- 팩토리 메서드 : 객체를 공장처럼(Factory) 찍어내는 메서드(Method)라고 해서 붙은 이름 
  - 예시 : Supplier<T> 인터페이스
    - Supplier<T>를 입력으로 받는 메서드는 일반적으로 한정적 와일드카드 타입(bounded wildcard type, 아이템 31)을 사용해 팩토리의 타입을 제한해야 함
    - 명시한 타입(클래스), 그리고 그 하위 타입들(상속받은 클래스)이라면 생성할 수 있는 팩터리
    - 의존 객체 주입이 유연성과 테스트 용이성을 개선해주긴 하지만, 의존성이 수 천 개나 되는 큰 프로젝트에서는 코드를 어지럽게 만들기도 함
- 호눅스가  JDBC 가 팩토리 메서드로 스프링이 많이 짜여있다고 했는데 이번기회에 공부해보자
  - jdbc 팩토리메서드
- 스프링같은 프레임워크는 DI 를 구현하기 위해 팩토리 메서드와 자바가 제공하는 API들을 아름답게 활용하고 있다 (구체적인 예시)
