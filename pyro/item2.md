# Item 2: 생성자에 매개변수가 많다면 빌더를 고려하라

이펙티브 자바에는 위처럼 나와있습니다.

하지만 이펙티브 자바를 3번째로 읽으면서 드는 생각은 정반대입니다.

저는 생성자에 매개변수가 많아도 빌더를 고려하지 말자고 주장하고 싶습니다.

좀더 강하게 이야기하자면 롬복과 같은 지원이 있는 상황이 아니라면, <br>
그 어떤 상황에서도 빌더 패턴을 쓰지 말자고 주장하고 싶습니다.

## 이유 1: 리팩토링이 귀찮다.

클래스의 멤버를 바꾸거나 리팩토링할 때, <br>
빌더 클래스 내부의 멤버가 자동으로 리팩토링되지 않습니다. <br>
수동으로 일일히 바꿔줘야하는데 엄청 귀찮습니다.

그나마 멤버의 타입을 바꾼 경우는 컴파일 에러가 터져서<br>
귀찮더라도 의무적으로 리팩토링을 하게 되는데,<br>
멤버의 네이밍 변경같은 경우는 IDE 나 컴파일러가 감지 못해서,<br>
일일히 코드를 읽어가며 멤버와 메서드 네이밍을 고쳐줘야합니다.

## 이유 2: Required 와 Optional 멤버 지정이 힘들다.

빌더 클래스는 빌더 객체를 생성 후 Setting 을 하는 방법을 취하고 있습니다.

원하는 객체 생성을 위한 Arguments 를 비동기적으로 가져와야할 때는 빌더 패턴이 상당히 유용하긴 합니다.

하지만 Lazy Setting 이란 Required 멤버를 깜빡하는 위험성이 항상 내장되어 있다는 것을 뜻합니다.

빌더 패턴을 쓰면 Required와 Optional 멤버에 관한 예외처리를 컴파일 단계에서 하기가 어렵습니다.

차라리 기본 생성자 혹은 static 팩토리 메서드만을 남겨두기를 저는 추천합니다.

## 이유 3: 생성자에 인자가 많다면, 애초부터 클래스 설계가 잘못되었을 가능성이 크다.

사실 제가 빌더 패턴을 싫어하는 가장 큰 이유입니다.

빌더 패턴이 필요할 만큼 생성자에 파라미터가 많다면, <br>
해당 클래스에 멤버가 매우 많을 가능성이 큽니다.

애초에 domain 클래스를 단일 책임 원칙을 잘 지키도록 설계했다면, <br>
domain 클래스의 맴버는 아무리 많아도 3개 이하가 되어야 합니다.<br>
빌더 패턴이 필요할 만큼 생성자 인자가 많다면, 클래스 설계를 잘못한 것은 아닌지 의심해볼 필요가 있습니다.

참고로 [Yegor Bugayenko](https://www.yegor256.com/2016/02/03/design-patterns-and-anti-patterns.html) 는 "이유 3" 때문에,<br>
빌더 패턴을 끔찍하다고 표현했습니다.

Builder. Terrible concept, since it encourages us to create and use big, complex objects. If you need a builder, there is already something wrong in your code. Refactor it so any object is easy to create through its constructors.

## dto 나 component 같은 경우라도 빌더 패턴을 쓰지 말자

만약 domain 이 아닌 dto 나 의존성 주입을 받는 component 클래스라면, <br>
객체 설계 영역과는 별개로 생성자의 인자가 많아질수 있습니다. <br>
다만 그런 경우에는 IDE 가 자동으로 만들어주는 생성자를 쓰는게, <br>
빌더 패턴을 쓰는 것보다 유지보수가 편했습니다.<br>
이유는 "이유1: 리팩토링이 귀찮다." 때문입니다.

의존성 주입 측면에서도, IDE 가 만들어준 생성자는 프레임워크에서 의존성 주입을 지원해주지만, <br>
빌더패턴을 쓸 경우 따로 의존성 주입을 해주기 위해 AutoWired 를 해주거나 삽질을 해주어야 합니다. <br>
그리고 결과적으로 테스트를 하기에 힘든 코드가 되는 경우가 많았습니다.

## 결론: 생성자에 코드를 넣지 말자 == 인자에 손대지 말라(don't touch the arguments)

[엘레강트 오브젝트 뽀개기 2, 슬라이드 4](https://nextstep-storage.s3.ap-northeast-2.amazonaws.com/e45215c7938049bea492f9801f1c4e59)
